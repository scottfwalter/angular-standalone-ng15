{"ast":null,"code":"import './polyfills';\nimport { inject } from '@angular/core';\nimport { BehaviorSubject, map } from 'rxjs';\nimport { bootstrapApplication } from '@angular/platform-browser';\nimport { HttpClient, provideHttpClient } from '@angular/common/http';\nimport { AsyncPipe, NgFor, NgIf } from '@angular/common';\nimport { provideRouter, Router, RouterLink, RouterLinkActive, RouterOutlet } from '@angular/router';\nimport * as i0 from \"@angular/core\";\nfunction AppComponent_li_10_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"li\", 6);\n    i0.ɵɵtext(1, \" Admin \");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction AppComponent_li_12_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"li\", 7)(1, \"a\", 8);\n    i0.ɵɵtext(2, \" Admin (not logged in) \");\n    i0.ɵɵelementEnd()();\n  }\n}\nfunction HomepageComponent_li_3_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"li\");\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const todo_r1 = ctx.$implicit;\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate(todo_r1.title);\n  }\n}\nexport class StateService {\n  #state$ = new BehaviorSubject({\n    loggedIn: false\n  });\n  loggedIn$ = this.#state$.pipe(map(x => x.loggedIn));\n  login = () => this.#state$.next({\n    loggedIn: true\n  });\n  logout = () => this.#state$.next({\n    loggedIn: false\n  });\n  static ɵfac = function StateService_Factory(t) {\n    return new (t || StateService)();\n  };\n  static ɵprov = /*@__PURE__*/i0.ɵɵdefineInjectable({\n    token: StateService,\n    factory: StateService.ɵfac,\n    providedIn: 'root'\n  });\n}\nexport class AppComponent {\n  loggedIn$ = inject(StateService).loggedIn$;\n  static ɵfac = function AppComponent_Factory(t) {\n    return new (t || AppComponent)();\n  };\n  static ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n    type: AppComponent,\n    selectors: [[\"my-app\"]],\n    standalone: true,\n    features: [i0.ɵɵStandaloneFeature],\n    decls: 15,\n    vars: 6,\n    consts: [[1, \"nav\"], [\"routerLink\", \"/home\", \"routerLinkActive\", \"active\"], [\"routerLink\", \"/login\", \"routerLinkActive\", \"active\"], [\"routerLink\", \"/test\", \"routerLinkActive\", \"active\"], [\"routerLink\", \"/admin\", \"routerLinkActive\", \"active\", 4, \"ngIf\"], [\"routerLinkActive\", \"active\", 4, \"ngIf\"], [\"routerLink\", \"/admin\", \"routerLinkActive\", \"active\"], [\"routerLinkActive\", \"active\"], [\"routerLink\", \"/admin\"]],\n    template: function AppComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵelementStart(0, \"ul\", 0)(1, \"li\")(2, \"a\", 1);\n        i0.ɵɵtext(3, \"Home\");\n        i0.ɵɵelementEnd()();\n        i0.ɵɵelementStart(4, \"li\")(5, \"a\", 2);\n        i0.ɵɵtext(6, \"Login\");\n        i0.ɵɵelementEnd()();\n        i0.ɵɵelementStart(7, \"li\")(8, \"a\", 3);\n        i0.ɵɵtext(9, \"Test\");\n        i0.ɵɵelementEnd()();\n        i0.ɵɵtemplate(10, AppComponent_li_10_Template, 2, 0, \"li\", 4);\n        i0.ɵɵpipe(11, \"async\");\n        i0.ɵɵtemplate(12, AppComponent_li_12_Template, 3, 0, \"li\", 5);\n        i0.ɵɵpipe(13, \"async\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelement(14, \"router-outlet\");\n      }\n      if (rf & 2) {\n        i0.ɵɵadvance(10);\n        i0.ɵɵproperty(\"ngIf\", i0.ɵɵpipeBind1(11, 2, ctx.loggedIn$));\n        i0.ɵɵadvance(2);\n        i0.ɵɵproperty(\"ngIf\", i0.ɵɵpipeBind1(13, 4, ctx.loggedIn$) === false);\n      }\n    },\n    dependencies: [NgIf, AsyncPipe, RouterOutlet, RouterLink, RouterLinkActive],\n    encapsulation: 2\n  });\n}\nexport class HomepageComponent {\n  #http = inject(HttpClient);\n  todos$ = this.#http.get('https://jsonplaceholder.typicode.com/todos');\n  static ɵfac = function HomepageComponent_Factory(t) {\n    return new (t || HomepageComponent)();\n  };\n  static ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n    type: HomepageComponent,\n    selectors: [[\"ng-component\"]],\n    standalone: true,\n    features: [i0.ɵɵStandaloneFeature],\n    decls: 5,\n    vars: 3,\n    consts: [[4, \"ngFor\", \"ngForOf\"]],\n    template: function HomepageComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵelementStart(0, \"h3\");\n        i0.ɵɵtext(1, \"Homepage\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(2, \"ul\");\n        i0.ɵɵtemplate(3, HomepageComponent_li_3_Template, 2, 1, \"li\", 0);\n        i0.ɵɵpipe(4, \"async\");\n        i0.ɵɵelementEnd();\n      }\n      if (rf & 2) {\n        i0.ɵɵadvance(3);\n        i0.ɵɵproperty(\"ngForOf\", i0.ɵɵpipeBind1(4, 1, ctx.todos$));\n      }\n    },\n    dependencies: [AsyncPipe, NgFor],\n    encapsulation: 2\n  });\n}\nexport class LoginComponent {\n  stateService = inject(StateService);\n  static ɵfac = function LoginComponent_Factory(t) {\n    return new (t || LoginComponent)();\n  };\n  static ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n    type: LoginComponent,\n    selectors: [[\"ng-component\"]],\n    standalone: true,\n    features: [i0.ɵɵStandaloneFeature],\n    decls: 4,\n    vars: 0,\n    consts: [[3, \"click\"]],\n    template: function LoginComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵelementStart(0, \"h3\");\n        i0.ɵɵtext(1, \"Login page\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(2, \"button\", 0);\n        i0.ɵɵlistener(\"click\", function LoginComponent_Template_button_click_2_listener() {\n          return ctx.stateService.login();\n        });\n        i0.ɵɵtext(3, \"Login\");\n        i0.ɵɵelementEnd();\n      }\n    },\n    encapsulation: 2\n  });\n}\nconst routes = [{\n  path: '',\n  redirectTo: 'home',\n  pathMatch: 'full'\n}, {\n  path: 'home',\n  component: HomepageComponent\n}, {\n  path: 'login',\n  component: LoginComponent\n}, {\n  path: 'test',\n  component: ngHtml('Test page 123!')\n}, {\n  path: 'admin',\n  canActivate: [() => {\n    const stateService = inject(StateService);\n    const router = inject(Router);\n    setTimeout(() => {\n      stateService.logout();\n      router.navigateByUrl('/');\n    }, 4000);\n    return stateService.loggedIn$;\n  }],\n  component: ngHtml('Admin page!')\n}];\nfunction ngHtml(html) {\n  class _NgHtml {\n    _html = html;\n    static ɵfac = function _NgHtml_Factory(t) {\n      return new (t || _NgHtml)();\n    };\n    static ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n      type: _NgHtml,\n      selectors: [[\"ng-component\"]],\n      decls: 1,\n      vars: 1,\n      consts: [[3, \"innerHTML\"]],\n      template: function _NgHtml_Template(rf, ctx) {\n        if (rf & 1) {\n          i0.ɵɵelement(0, \"div\", 0);\n        }\n        if (rf & 2) {\n          i0.ɵɵproperty(\"innerHTML\", ctx._html, i0.ɵɵsanitizeHtml);\n        }\n      },\n      encapsulation: 2\n    });\n  }\n  return _NgHtml;\n}\nbootstrapApplication(AppComponent, {\n  providers: [provideHttpClient(), provideRouter(routes)]\n});","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}